<div class="modal fade" id="robot-in-game-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body">
          <div class="img">
              <img src="" class="image-robot-level" >
          </div>
          <div class="description">
              <h4 class="quality">Quality: Common</h4>
              <p class="f-inter">Set this NFT to your Avatar to display and make it eligible for more benefits in the Pixil Saga</p>
              <p class="time-check f-inter" style="display:none">You need to wait <span class="f-inter block-need-to-wait">0</span> blocks to take robot out</p>
          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary btn-out-game" >Out</button>
      </div>
    </div>
  </div>
</div>

<script>

  var robotId = null;
  var setRobotJoinGameId = null;
  var user = null;
  $("#robot-in-game-modal").on("show.bs.modal",async function(event)
  {
    var tokenId = $(event.relatedTarget).data('robotid');
    robotId = tokenId ? parseInt(tokenId) : robotId;
    // render info
    let infoRobot = await PixilSaga.RobotNFT.getInfoRobotByRobotId(robotId);
    renderInfoRobot(infoRobot.level);
  });
  $(".btn-out-game").click(async function ()
  {
    let UserData = await PixilSaga.GameController.GetDataUser(user);
    let timeRobotToGetout = parseFloat(UserData.blockRobotJoin) + parseFloat(UserData.delayBlockRobotNFTOutGame) ;
    if (timeRobotToGetout < parseFloat(UserData.blockNumber)) {
      LetRobotNFTOutOfGame();
    }
    else {
      $(".time-check").show();
      let blockNeedToWait = timeRobotToGetout - parseFloat(UserData.blockNumber) ;
      $(".block-need-to-wait").text(blockNeedToWait);
    }
  });
  function renderInfoRobot (level) 
  {
    $('.image-robot-level').attr('src', `../assets/images/Robot_level_Id_${level}.png`);
  }
  function LetRobotNFTOutOfGame ()
  {
    PixilSaga.GameController.LetRobotNFTOutOfGame();
  }
</script>